import{d as ct,F as Z,C as mt,f as M,p as bt,y as R,r as S,a as C,i as H,n as tt,k as g,R as vt,g as wt,t as O,o as k,w as z,x as yt,S as xt}from"./@vue-CtQ2VzKC.js";import{a as F,o as I}from"./evtd-CI_DDEu_.js";import{f as gt,e as $t,a as Mt}from"./seemly-BNU291yW.js";import{u as Et}from"./@css-render-C5iU2d1d.js";import{e as zt,u as N,o as Ft,i as St}from"./vooks-5nhVbaps.js";import{z as At}from"./vdirs-DRH9Xvnd.js";import{C as Tt}from"./css-render-DYRmsh0A.js";import{R as Bt}from"./@juggle-DB6f1vmu.js";function V(n,t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);return o()}function Y(n,t=!0,e=[]){return n.forEach(o=>{if(o!==null){if(typeof o!="object"){(typeof o=="string"||typeof o=="number")&&e.push(ct(String(o)));return}if(Array.isArray(o)){Y(o,t,e);return}if(o.type===Z){if(o.children===null)return;Array.isArray(o.children)&&Y(o.children,t,e)}else o.type!==mt&&e.push(o)}}),e}function j(n,t,e="default"){const o=t[e];if(o===void 0)throw new Error(`[vueuc/${n}]: slot[${e}] is empty.`);const l=Y(o());if(l.length===1)return l[0];throw new Error(`[vueuc/${n}]: slot[${e}] should have exactly one child.`)}let x=null;function et(){if(x===null&&(x=document.getElementById("v-binder-view-measurer"),x===null)){x=document.createElement("div"),x.id="v-binder-view-measurer";const{style:n}=x;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(x)}return x.getBoundingClientRect()}function Ot(n,t){const e=et();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function X(n){const t=n.getBoundingClientRect(),e=et();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function Ct(n){return n.nodeType===9?null:n.parentNode}function nt(n){if(n===null)return null;const t=Ct(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:o,overflowY:l}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+l+o))return t}return nt(t)}const Zt=M({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;bt("VBinder",(t=R())===null||t===void 0?void 0:t.proxy);const e=H("VBinder",null),o=S(null),l=r=>{o.value=r,e&&n.syncTargetWithParent&&e.setTargetRef(r)};let d=[];const p=()=>{let r=o.value;for(;r=nt(r),r!==null;)d.push(r);for(const c of d)I("scroll",c,w,!0)},m=()=>{for(const r of d)F("scroll",r,w,!0);d=[]},u=new Set,b=r=>{u.size===0&&p(),u.has(r)||u.add(r)},v=r=>{u.has(r)&&u.delete(r),u.size===0&&m()},w=()=>{gt(s)},s=()=>{u.forEach(r=>r())},a=new Set,h=r=>{a.size===0&&I("resize",window,i),a.has(r)||a.add(r)},f=r=>{a.has(r)&&a.delete(r),a.size===0&&F("resize",window,i)},i=()=>{a.forEach(r=>r())};return C(()=>{F("resize",window,i),m()}),{targetRef:o,setTargetRef:l,addScrollListener:b,removeScrollListener:v,addResizeListener:h,removeResizeListener:f}},render(){return V("binder",this.$slots)}}),Rt=M({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=H("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?tt(j("follower",this.$slots),[[t]]):j("follower",this.$slots)}});function U(n,t){console.error(`[vueuc/${n}]: ${t}`)}const{c:T}=Tt(),Lt="vueuc-style";function q(n){return typeof n=="string"?document.querySelector(n):n()||null}const Xt=M({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:zt(O(n,"show")),mergedTo:wt(()=>{const{to:t}=n;return t??"body"})}},render(){return this.showTeleport?this.disabled?V("lazy-teleport",this.$slots):g(vt,{disabled:this.disabled,to:this.mergedTo},V("lazy-teleport",this.$slots)):null}}),B={top:"bottom",bottom:"top",left:"right",right:"left"},K={start:"end",center:"center",end:"start"},D={top:"height",bottom:"height",left:"width",right:"width"},Dt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},It={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Vt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},G={top:!0,bottom:!1,left:!0,right:!1},J={top:"end",bottom:"start",left:"end",right:"start"};function Yt(n,t,e,o,l,d){if(!l||d)return{placement:n,top:0,left:0};const[p,m]=n.split("-");let u=m??"center",b={top:0,left:0};const v=(a,h,f)=>{let i=0,r=0;const c=e[a]-t[h]-t[a];return c>0&&o&&(f?r=G[h]?c:-c:i=G[h]?c:-c),{left:i,top:r}},w=p==="left"||p==="right";if(u!=="center"){const a=Vt[n],h=B[a],f=D[a];if(e[f]>t[f]){if(t[a]+t[f]<e[f]){const i=(e[f]-t[f])/2;t[a]<i||t[h]<i?t[a]<t[h]?(u=K[m],b=v(f,h,w)):b=v(f,a,w):u="center"}}else e[f]<t[f]&&t[h]<0&&t[a]>t[h]&&(u=K[m])}else{const a=p==="bottom"||p==="top"?"left":"top",h=B[a],f=D[a],i=(e[f]-t[f])/2;(t[a]<i||t[h]<i)&&(t[a]>t[h]?(u=J[a],b=v(f,a,w)):(u=J[h],b=v(f,h,w)))}let s=p;return t[p]<e[D[p]]&&t[p]<t[B[p]]&&(s=B[p]),{placement:u!=="center"?`${s}-${u}`:s,left:b.left,top:b.top}}function Ht(n,t){return t?It[n]:Dt[n]}function kt(n,t,e,o,l,d){if(d)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+l)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width+l)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+l)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width+l)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width+l)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+l)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+l)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+o)}px`,left:`${Math.round(e.left-t.left+e.width/2+l)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+o)}px`,left:`${Math.round(e.left-t.left+e.width+l)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+o)}px`,left:`${Math.round(e.left-t.left+l)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+o)}px`,left:`${Math.round(e.left-t.left+e.width/2+l)}px`,transform:"translateX(-50%)"}}}const Wt=T([T(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),T(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[T("> *",{pointerEvents:"all"})])]),te=M({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=H("VBinder"),e=N(()=>n.enabled!==void 0?n.enabled:n.show),o=S(null),l=S(null),d=()=>{const{syncTrigger:s}=n;s.includes("scroll")&&t.addScrollListener(u),s.includes("resize")&&t.addResizeListener(u)},p=()=>{t.removeScrollListener(u),t.removeResizeListener(u)};k(()=>{e.value&&(u(),d())});const m=Et();Wt.mount({id:"vueuc/binder",head:!0,anchorMetaName:Lt,ssr:m}),C(()=>{p()}),Ft(()=>{e.value&&u()});const u=()=>{if(!e.value)return;const s=o.value;if(s===null)return;const a=t.targetRef,{x:h,y:f,overlap:i}=n,r=h!==void 0&&f!==void 0?Ot(h,f):X(a);s.style.setProperty("--v-target-width",`${Math.round(r.width)}px`),s.style.setProperty("--v-target-height",`${Math.round(r.height)}px`);const{width:c,minWidth:y,placement:A,internalShift:lt,flip:ut}=n;s.setAttribute("v-placement",A),i?s.setAttribute("v-overlap",""):s.removeAttribute("v-overlap");const{style:$}=s;c==="target"?$.width=`${r.width}px`:c!==void 0?$.width=c:$.width="",y==="target"?$.minWidth=`${r.width}px`:y!==void 0?$.minWidth=y:$.minWidth="";const at=X(s),dt=X(l.value),{left:W,top:P,placement:L}=Yt(A,r,at,lt,ut,i),_=Ht(L,i),{left:ft,top:ht,transform:pt}=kt(L,dt,r,P,W,i);s.setAttribute("v-placement",L),s.style.setProperty("--v-offset-left",`${Math.round(W)}px`),s.style.setProperty("--v-offset-top",`${Math.round(P)}px`),s.style.transform=`translateX(${ft}) translateY(${ht}) ${pt}`,s.style.setProperty("--v-transform-origin",_),s.style.transformOrigin=_};z(e,s=>{s?(d(),b()):p()});const b=()=>{yt().then(u).catch(s=>console.error(s))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(s=>{z(O(n,s),u)}),["teleportDisabled"].forEach(s=>{z(O(n,s),b)}),z(O(n,"syncTrigger"),s=>{s.includes("resize")?t.addResizeListener(u):t.removeResizeListener(u),s.includes("scroll")?t.addScrollListener(u):t.removeScrollListener(u)});const v=St(),w=N(()=>{const{to:s}=n;if(s!==void 0)return s;v.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:l,followerRef:o,mergedTo:w,syncPosition:u}},render(){return g(Xt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=g("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[g("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?tt(e,[[At,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});class Pt{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||Bt)(this.handleResize),this.elHandlersMap=new Map}handleResize(t){for(const e of t){const o=this.elHandlersMap.get(e.target);o!==void 0&&o(e)}}registerHandler(t,e){this.elHandlersMap.set(t,e),this.observer.observe(t)}unregisterHandler(t){this.elHandlersMap.has(t)&&(this.elHandlersMap.delete(t),this.observer.unobserve(t))}}const Q=new Pt,ee=M({name:"ResizeObserver",props:{onResize:Function},setup(n){let t=!1;const e=R().proxy;function o(l){const{onResize:d}=n;d!==void 0&&d(l)}k(()=>{const l=e.$el;if(l===void 0){U("resize-observer","$el does not exist.");return}if(l.nextElementSibling!==l.nextSibling&&l.nodeType===3&&l.nodeValue!==""){U("resize-observer","$el can not be observed (it may be a text node).");return}l.nextElementSibling!==null&&(Q.registerHandler(l.nextElementSibling,o),t=!0)}),C(()=>{t&&Q.unregisterHandler(e.$el.nextElementSibling)})},render(){return xt(this.$slots,"default")}});function rt(n){return n instanceof HTMLElement}function ot(n){for(let t=0;t<n.childNodes.length;t++){const e=n.childNodes[t];if(rt(e)&&(st(e)||ot(e)))return!0}return!1}function it(n){for(let t=n.childNodes.length-1;t>=0;t--){const e=n.childNodes[t];if(rt(e)&&(st(e)||it(e)))return!0}return!1}function st(n){if(!_t(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function _t(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"SELECT":case"TEXTAREA":return!0;default:return!1}}let E=[];const ne=M({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:[String,Function],finalFocusTo:[String,Function],returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const t=$t(),e=S(null),o=S(null);let l=!1,d=!1;const p=typeof document>"u"?null:document.activeElement;function m(){return E[E.length-1]===t}function u(i){var r;i.code==="Escape"&&m()&&((r=n.onEsc)===null||r===void 0||r.call(n,i))}k(()=>{z(()=>n.active,i=>{i?(w(),I("keydown",document,u)):(F("keydown",document,u),l&&s())},{immediate:!0})}),C(()=>{F("keydown",document,u),l&&s()});function b(i){if(!d&&m()){const r=v();if(r===null||r.contains(Mt(i)))return;a("first")}}function v(){const i=e.value;if(i===null)return null;let r=i;for(;r=r.nextSibling,!(r===null||r instanceof Element&&r.tagName==="DIV"););return r}function w(){var i;if(!n.disabled){if(E.push(t),n.autoFocus){const{initialFocusTo:r}=n;r===void 0?a("first"):(i=q(r))===null||i===void 0||i.focus({preventScroll:!0})}l=!0,document.addEventListener("focus",b,!0)}}function s(){var i;if(n.disabled||(document.removeEventListener("focus",b,!0),E=E.filter(c=>c!==t),m()))return;const{finalFocusTo:r}=n;r!==void 0?(i=q(r))===null||i===void 0||i.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&p instanceof HTMLElement&&(d=!0,p.focus({preventScroll:!0}),d=!1)}function a(i){if(m()&&n.active){const r=e.value,c=o.value;if(r!==null&&c!==null){const y=v();if(y==null||y===c){d=!0,r.focus({preventScroll:!0}),d=!1;return}d=!0;const A=i==="first"?ot(y):it(y);d=!1,A||(d=!0,r.focus({preventScroll:!0}),d=!1)}}}function h(i){if(d)return;const r=v();r!==null&&(i.relatedTarget!==null&&r.contains(i.relatedTarget)?a("last"):a("first"))}function f(i){d||(i.relatedTarget!==null&&i.relatedTarget===e.value?a("last"):a("first"))}return{focusableStartRef:e,focusableEndRef:o,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:h,handleEndFocus:f}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:t,focusableStyle:e}=this;return g(Z,null,[g("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:e,onFocus:this.handleStartFocus}),n(),g("div",{"aria-hidden":"true",style:e,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}});export{Zt as B,ne as F,ee as V,te as a,Rt as b};
